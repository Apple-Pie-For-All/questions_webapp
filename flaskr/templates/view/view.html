{% extends 'base.html' %}
{% block content %}
<article class="post">
    <header>
        <div>
        <h1>{{ post.title }}</h1>
        <div class="about">by {{ post.author.name }} on {{ post.created.strftime('%Y-%m-%d') }}</div>
        </div>
        {% if g.user.id == post.author_id %}
        <a class="action" href="{{ url_for('blog.update', id=post.id) }}">Edit</a>
        {% endif %}
    </header>
    <p class="body">{{ post.body }}</p>
</article>
{% for comment in post.comments %}
<article class="comment">
  <header>
    <div>
      <h2>{{ comment.author.name }}</h2>
      <div class="about">at {{ comment.created.strftime('%Y-%m-%d') }}</div>
    </div>
    {% if g.user.id == comment.author_id %}
      <a class="action" href="{{ url_for('blog.update', id=post.id) }}">Edit</a>
    {% endif %}
  </header>
  <p class="body">{{ comment.text }}</p>
</article>
{% if not loop.last %}
  <hr>
{% endif %}
{% endfor %}
{% endblock %}